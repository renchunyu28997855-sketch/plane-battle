{"version":3,"file":"index-BSsb6JBU.js","sources":["../../src/types/index.ts","../../src/utils/index.ts","../../src/systems/sound-manager.ts","../../src/entities/player.ts","../../src/entities/bullet-manager.ts","../../src/entities/enemy.ts","../../src/entities/enemy-manager.ts","../../src/engine/game-engine.ts","../../src/main.ts"],"sourcesContent":["/**\n * åŸºç¡€ç±»å‹å®šä¹‰\n */\n\n// ä½ç½®åæ ‡\nexport interface Position {\n  x: number;\n  y: number;\n}\n\n// å°ºå¯¸\nexport interface Size {\n  width: number;\n  height: number;\n}\n\n// çŸ©å½¢åŒºåŸŸï¼ˆç”¨äºç¢°æ’æ£€æµ‹ï¼‰\nexport interface Rect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n// æ¸¸æˆçŠ¶æ€\nexport type GameState = 'menu' | 'playing' | 'paused' | 'levelComplete' | 'gameOver';\n\n// å®ä½“ç±»å‹\nexport type EntityType = 'player' | 'bullet' | 'enemy' | 'enemyBullet';\n\n// æ•Œäººç±»å‹\nexport type EnemyType = 'normal' | 'fast' | 'heavy' | 'boss' | 'elite' | 'shielded' | 'bomber';\n\n// å­å¼¹ç±»å‹\nexport type BulletType = 'normal' | 'tracking' | 'spread' | 'laser';\n\n// æ–¹å‘\nexport type Direction = 'up' | 'down' | 'left' | 'right';\n\n// æŒ‰é”®çŠ¶æ€\nexport interface KeyState {\n  ArrowUp: boolean;\n  ArrowDown: boolean;\n  ArrowLeft: boolean;\n  ArrowRight: boolean;\n  Space: boolean;\n}\n\n// æ¸¸æˆé…ç½®\nexport interface GameConfig {\n  canvasWidth: number;\n  canvasHeight: number;\n  fps: number;\n  playerSpeed: number;\n  bulletSpeed: number;\n  enemyBaseSpeed: number;\n  spawnInterval: number;\n  bulletDamage: number;\n  playerHealth: number;\n}\n\n// å…³å¡é…ç½®\nexport interface LevelConfig {\n  level: number;\n  name: string;\n  enemyCount: number;\n  spawnInterval: number;\n  enemySpeed: number;\n  bossLevel: boolean;\n}\n\n// é»˜è®¤æ¸¸æˆé…ç½®\nexport const DEFAULT_GAME_CONFIG: GameConfig = {\n  canvasWidth: 480,\n  canvasHeight: 720,\n  fps: 60,\n  playerSpeed: 5,\n  bulletSpeed: 8,\n  enemyBaseSpeed: 2,\n  spawnInterval: 1500,\n  bulletDamage: 1,\n  playerHealth: 3,\n};\n\n// å…³å¡é…ç½®\nexport const LEVEL_CONFIGS: LevelConfig[] = [\n  {\n    level: 1,\n    name: 'ç¬¬ä¸€å…³',\n    enemyCount: 20,\n    spawnInterval: 1500,\n    enemySpeed: 2,\n    bossLevel: false,\n  },\n  {\n    level: 2,\n    name: 'ç¬¬äºŒå…³',\n    enemyCount: 30,\n    spawnInterval: 1200,\n    enemySpeed: 3,\n    bossLevel: false,\n  },\n  {\n    level: 3,\n    name: 'ç¬¬ä¸‰å…³',\n    enemyCount: 30,\n    spawnInterval: 1000,\n    enemySpeed: 4,\n    bossLevel: true,\n  },\n];\n","/**\n * å·¥å…·å‡½æ•°\n */\n\nimport type { Rect, Position } from '../types';\n\n/**\n * æ£€æµ‹ä¸¤ä¸ªçŸ©å½¢æ˜¯å¦ç¢°æ’\n */\nexport function checkCollision(rect1: Rect, rect2: Rect): boolean {\n  return (\n    rect1.x < rect2.x + rect2.width &&\n    rect1.x + rect1.width > rect2.x &&\n    rect1.y < rect2.y + rect2.height &&\n    rect1.y + rect1.height > rect2.y\n  );\n}\n\n/**\n * ä»ä½ç½®å’Œå°ºå¯¸åˆ›å»ºçŸ©å½¢\n */\nexport function createRect(position: Position, width: number, height: number): Rect {\n  return {\n    x: position.x,\n    y: position.y,\n    width,\n    height,\n  };\n}\n\n/**\n * é™åˆ¶æ•°å€¼åœ¨æŒ‡å®šèŒƒå›´å†…\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * ç”Ÿæˆéšæœºæ•´æ•°\n */\nexport function randomInt(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»\n */\nexport function distance(p1: Position, p2: Position): number {\n  const dx = p2.x - p1.x;\n  const dy = p2.y - p1.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n * æ ¼å¼åŒ–åˆ†æ•°ï¼ˆè¡¥é›¶ï¼‰\n */\nexport function formatScore(score: number, digits: number = 6): string {\n  return score.toString().padStart(digits, '0');\n}\n\n/**\n * ç®€å•çš„çŸ©å½¢ç»˜åˆ¶å‡½æ•°\n */\nexport function drawRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  color: string\n): void {\n  ctx.fillStyle = color;\n  ctx.fillRect(x, y, width, height);\n}\n\n/**\n * ç®€å•çš„åœ†å½¢ç»˜åˆ¶å‡½æ•°\n */\nexport function drawCircle(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  radius: number,\n  color: string\n): void {\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2);\n  ctx.fill();\n}\n\n/**\n * ç»˜åˆ¶ä¸‰è§’å½¢ï¼ˆç”¨äºé£æœºï¼‰\n */\nexport function drawTriangle(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  color: string,\n  direction: 'up' | 'down' = 'up'\n): void {\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  \n  if (direction === 'up') {\n    ctx.moveTo(x, y - height / 2);\n    ctx.lineTo(x - width / 2, y + height / 2);\n    ctx.lineTo(x + width / 2, y + height / 2);\n  } else {\n    ctx.moveTo(x, y + height / 2);\n    ctx.lineTo(x - width / 2, y - height / 2);\n    ctx.lineTo(x + width / 2, y - height / 2);\n  }\n  \n  ctx.closePath();\n  ctx.fill();\n}\n","/**\n * éŸ³æ•ˆç®¡ç†å™¨ - ä½¿ç”¨ Web Audio API ç”Ÿæˆç¨‹åºåŒ–éŸ³æ•ˆ\n */\n\nexport type SoundType = 'shoot' | 'enemyShoot' | 'explosion' | 'powerUp' | 'hit' | 'gameOver' | 'levelUp';\n\nexport class SoundManager {\n  private audioContext: AudioContext | null = null;\n  private masterGain: GainNode | null = null;\n  private enabled = true;\n  private volume = 0.3;\n\n  constructor() {\n    this.initAudio();\n  }\n\n  private initAudio(): void {\n    try {\n      this.audioContext = new (window.AudioContext || (window as unknown as { webkitAudioContext: typeof AudioContext }).webkitAudioContext)();\n      this.masterGain = this.audioContext.createGain();\n      this.masterGain.connect(this.audioContext.destination);\n      this.masterGain.gain.value = this.volume;\n    } catch {\n      console.warn('Web Audio API not supported');\n    }\n  }\n\n  // ç¡®ä¿ AudioContext å·²è§£é”ï¼ˆæµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥ï¼‰\n  async unlock(): Promise<void> {\n    if (this.audioContext?.state === 'suspended') {\n      await this.audioContext.resume();\n    }\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n\n  setVolume(volume: number): void {\n    this.volume = Math.max(0, Math.min(1, volume));\n    if (this.masterGain) {\n      this.masterGain.gain.value = this.volume;\n    }\n  }\n\n  play(type: SoundType): void {\n    if (!this.enabled || !this.audioContext || !this.masterGain) return;\n\n    this.unlock();\n\n    switch (type) {\n      case 'shoot':\n        this.playShoot();\n        break;\n      case 'enemyShoot':\n        this.playEnemyShoot();\n        break;\n      case 'explosion':\n        this.playExplosion();\n        break;\n      case 'powerUp':\n        this.playPowerUp();\n        break;\n      case 'hit':\n        this.playHit();\n        break;\n      case 'gameOver':\n        this.playGameOver();\n        break;\n      case 'levelUp':\n        this.playLevelUp();\n        break;\n    }\n  }\n\n  // ç©å®¶å°„å‡» - å¿«é€Ÿä¸Šå‡çš„éŸ³è°ƒ\n  private playShoot(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const osc = this.audioContext.createOscillator();\n    const gain = this.audioContext.createGain();\n\n    osc.connect(gain);\n    gain.connect(this.masterGain);\n\n    osc.type = 'square';\n    osc.frequency.setValueAtTime(880, this.audioContext.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(220, this.audioContext.currentTime + 0.1);\n\n    gain.gain.setValueAtTime(0.3, this.audioContext.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);\n\n    osc.start(this.audioContext.currentTime);\n    osc.stop(this.audioContext.currentTime + 0.1);\n  }\n\n  // æ•Œäººå°„å‡» - è¾ƒä½æ²‰çš„éŸ³è°ƒ\n  private playEnemyShoot(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const osc = this.audioContext.createOscillator();\n    const gain = this.audioContext.createGain();\n\n    osc.connect(gain);\n    gain.connect(this.masterGain);\n\n    osc.type = 'sawtooth';\n    osc.frequency.setValueAtTime(220, this.audioContext.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(110, this.audioContext.currentTime + 0.15);\n\n    gain.gain.setValueAtTime(0.2, this.audioContext.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.15);\n\n    osc.start(this.audioContext.currentTime);\n    osc.stop(this.audioContext.currentTime + 0.15);\n  }\n\n  // çˆ†ç‚¸éŸ³æ•ˆ - å™ªå£° + ä½é¢‘\n  private playExplosion(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    // åˆ›å»ºå™ªå£°\n    const bufferSize = this.audioContext.sampleRate * 0.3;\n    const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);\n    const data = buffer.getChannelData(0);\n\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n\n    const noise = this.audioContext.createBufferSource();\n    noise.buffer = buffer;\n\n    // ä½é€šæ»¤æ³¢å™¨\n    const filter = this.audioContext.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.setValueAtTime(1000, this.audioContext.currentTime);\n    filter.frequency.exponentialRampToValueAtTime(100, this.audioContext.currentTime + 0.3);\n\n    const gain = this.audioContext.createGain();\n    gain.gain.setValueAtTime(0.5, this.audioContext.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);\n\n    noise.connect(filter);\n    filter.connect(gain);\n    gain.connect(this.masterGain);\n\n    noise.start(this.audioContext.currentTime);\n    noise.stop(this.audioContext.currentTime + 0.3);\n  }\n\n  // æ‹¾å–é“å…·éŸ³æ•ˆ\n  private playPowerUp(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const osc1 = this.audioContext.createOscillator();\n    const osc2 = this.audioContext.createOscillator();\n    const gain = this.audioContext.createGain();\n\n    osc1.connect(gain);\n    osc2.connect(gain);\n    gain.connect(this.masterGain);\n\n    osc1.type = 'sine';\n    osc2.type = 'sine';\n\n    osc1.frequency.setValueAtTime(523, this.audioContext.currentTime); // C5\n    osc1.frequency.setValueAtTime(659, this.audioContext.currentTime + 0.1); // E5\n    osc1.frequency.setValueAtTime(784, this.audioContext.currentTime + 0.2); // G5\n\n    osc2.frequency.setValueAtTime(523 * 1.5, this.audioContext.currentTime); // G5\n    osc2.frequency.setValueAtTime(659 * 1.5, this.audioContext.currentTime + 0.1); // B5\n    osc2.frequency.setValueAtTime(784 * 1.5, this.audioContext.currentTime + 0.2); // D6\n\n    gain.gain.setValueAtTime(0.2, this.audioContext.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.4);\n\n    osc1.start(this.audioContext.currentTime);\n    osc2.start(this.audioContext.currentTime);\n    osc1.stop(this.audioContext.currentTime + 0.4);\n    osc2.stop(this.audioContext.currentTime + 0.4);\n  }\n\n  // å‘½ä¸­éŸ³æ•ˆ - çŸ­ä¿ƒ\n  private playHit(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const osc = this.audioContext.createOscillator();\n    const gain = this.audioContext.createGain();\n\n    osc.connect(gain);\n    gain.connect(this.masterGain);\n\n    osc.type = 'triangle';\n    osc.frequency.setValueAtTime(150, this.audioContext.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(50, this.audioContext.currentTime + 0.05);\n\n    gain.gain.setValueAtTime(0.3, this.audioContext.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.05);\n\n    osc.start(this.audioContext.currentTime);\n    osc.stop(this.audioContext.currentTime + 0.05);\n  }\n\n  // æ¸¸æˆç»“æŸéŸ³æ•ˆ\n  private playGameOver(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const notes = [392, 370, 330, 262]; // G4, F4, E4, C4\n    const duration = 0.2;\n\n    notes.forEach((freq, i) => {\n      const osc = this.audioContext!.createOscillator();\n      const gain = this.audioContext!.createGain();\n\n      osc.connect(gain);\n      gain.connect(this.masterGain!);\n\n      osc.type = 'sine';\n      osc.frequency.value = freq;\n\n      const startTime = this.audioContext!.currentTime + i * duration;\n      gain.gain.setValueAtTime(0.3, startTime);\n      gain.gain.exponentialRampToValueAtTime(0.01, startTime + duration);\n\n      osc.start(startTime);\n      osc.stop(startTime + duration);\n    });\n  }\n\n  // å‡çº§éŸ³æ•ˆ\n  private playLevelUp(): void {\n    if (!this.audioContext || !this.masterGain) return;\n\n    const notes = [523, 659, 784, 1047]; // C5, E5, G5, C6\n    const duration = 0.15;\n\n    notes.forEach((freq, i) => {\n      const osc = this.audioContext!.createOscillator();\n      const gain = this.audioContext!.createGain();\n\n      osc.connect(gain);\n      gain.connect(this.masterGain!);\n\n      osc.type = 'square';\n      osc.frequency.value = freq;\n\n      const startTime = this.audioContext!.currentTime + i * duration;\n      gain.gain.setValueAtTime(0.2, startTime);\n      gain.gain.exponentialRampToValueAtTime(0.01, startTime + duration);\n\n      osc.start(startTime);\n      osc.stop(startTime + duration);\n    });\n  }\n\n  destroy(): void {\n    if (this.audioContext) {\n      this.audioContext.close();\n    }\n  }\n}\n\n// å…¨å±€éŸ³æ•ˆç®¡ç†å™¨å®ä¾‹\nexport const soundManager = new SoundManager();\n","/**\n * ç©å®¶é£æœºå®ä½“\n */\n\nimport type { GameConfig, Rect } from '../types';\nimport { checkCollision } from '../utils';\nimport type { BulletManager } from './bullet-manager';\nimport { soundManager } from '../systems/sound-manager';\n\n/**\n * ç©å®¶é£æœºç±»\n */\nexport class Player {\n  // ä½ç½®å’Œå°ºå¯¸\n  x: number;\n  y: number;\n  readonly width = 40;\n  readonly height = 50;\n  \n  // ç”Ÿå‘½å€¼\n  health = 3;\n  maxHealth = 3;\n  \n  // å°„å‡»å†·å´\n  private shootCooldown = 0;\n  private readonly shootInterval = 200; // å°„å‡»é—´éš”ï¼ˆæ¯«ç§’ï¼‰\n  \n  // æ„é€ å‡½æ•°\n  constructor(x: number, y: number, config: GameConfig) {\n    this.x = x;\n    this.y = y;\n    this.maxHealth = config.playerHealth;\n    this.health = config.playerHealth;\n  }\n  \n  // é‡ç½®ç©å®¶çŠ¶æ€\n  reset(x: number, y: number): void {\n    this.x = x;\n    this.y = y;\n    this.health = this.maxHealth;\n    this.shootCooldown = 0;\n  }\n  \n  // å°„å‡»\n  shoot(bulletManager: BulletManager): void {\n    if (this.shootCooldown <= 0) {\n      bulletManager.createPlayerBullet(this.x, this.y - this.height / 2);\n      this.shootCooldown = this.shootInterval;\n      soundManager.play('shoot');\n    }\n  }\n  \n  // æ›´æ–°\n  update(deltaTime: number): void {\n    if (this.shootCooldown > 0) {\n      this.shootCooldown -= deltaTime;\n    }\n  }\n  \n  // å—ä¼¤\n  takeDamage(damage: number): void {\n    this.health -= damage;\n    if (this.health < 0) {\n      this.health = 0;\n    }\n  }\n  \n  // æ˜¯å¦è¢«æ‘§æ¯\n  isDestroyed(): boolean {\n    return this.health <= 0;\n  }\n  \n  // è·å–ç¢°æ’çŸ©å½¢\n  getRect(): Rect {\n    return {\n      x: this.x - this.width / 2,\n      y: this.y - this.height / 2,\n      width: this.width,\n      height: this.height,\n    };\n  }\n  \n  // æ£€æŸ¥ç¢°æ’\n  checkCollision(other: { getRect: () => Rect }): boolean {\n    return checkCollision(this.getRect(), other.getRect());\n  }\n  \n  // æ¸²æŸ“\n  render(ctx: CanvasRenderingContext2D): void {\n    // ç»˜åˆ¶é£æœºä¸»ä½“\n    this.drawBody(ctx);\n    \n    // ç»˜åˆ¶ç”Ÿå‘½å€¼æŒ‡ç¤ºå™¨\n    this.drawHealthIndicator(ctx);\n  }\n  \n  // ç»˜åˆ¶é£æœºä¸»ä½“\n  private drawBody(ctx: CanvasRenderingContext2D): void {\n    // æœºèº«\n    ctx.fillStyle = '#3498db';\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y - this.height / 2); // é¡¶éƒ¨\n    ctx.lineTo(this.x - this.width / 2, this.y + this.height / 2); // å·¦ä¸‹\n    ctx.lineTo(this.x + this.width / 2, this.y + this.height / 2); // å³ä¸‹\n    ctx.closePath();\n    ctx.fill();\n    \n    // é©¾é©¶èˆ±\n    ctx.fillStyle = '#2980b9';\n    ctx.beginPath();\n    ctx.ellipse(this.x, this.y - 5, 8, 12, 0, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // å¼•æ“ç«ç„°\n    if (Math.random() > 0.5) {\n      ctx.fillStyle = '#e74c3c';\n      ctx.beginPath();\n      ctx.moveTo(this.x - 5, this.y + this.height / 2);\n      ctx.lineTo(this.x, this.y + this.height / 2 + 15);\n      ctx.lineTo(this.x + 5, this.y + this.height / 2);\n      ctx.closePath();\n      ctx.fill();\n    }\n  }\n  \n  // ç»˜åˆ¶ç”Ÿå‘½å€¼æŒ‡ç¤ºå™¨\n  private drawHealthIndicator(ctx: CanvasRenderingContext2D): void {\n    const indicatorWidth = 30;\n    const indicatorHeight = 4;\n    const startX = this.x - indicatorWidth / 2;\n    const startY = this.y + this.height / 2 + 10;\n    \n    // èƒŒæ™¯\n    ctx.fillStyle = '#555555';\n    ctx.fillRect(startX, startY, indicatorWidth, indicatorHeight);\n    \n    // ç”Ÿå‘½å€¼\n    const healthPercent = this.health / this.maxHealth;\n    ctx.fillStyle = healthPercent > 0.3 ? '#2ecc71' : '#e74c3c';\n    ctx.fillRect(startX, startY, indicatorWidth * healthPercent, indicatorHeight);\n  }\n}\n","/**\n * å­å¼¹ç®¡ç†å™¨\n */\n\nimport type { GameConfig, Rect } from '../types';\nimport { checkCollision } from '../utils';\n\n/**\n * å­å¼¹ç±»\n */\nexport class Bullet {\n  // ä½ç½®\n  x: number;\n  y: number;\n  \n  // å°ºå¯¸\n  width: number;\n  height: number;\n  \n  // é€Ÿåº¦\n  speed: number;\n  \n  // æ¨ªå‘é€Ÿåº¦ï¼ˆç”¨äºæ•£å¼¹å’Œè·Ÿè¸ªå¼¹ï¼‰\n  vx = 0;\n  \n  // ä¼¤å®³\n  readonly damage: number;\n  \n  // æ¿€æ´»çŠ¶æ€\n  active = true;\n  \n  // æ˜¯å¦æ˜¯ç©å®¶å­å¼¹\n  readonly isPlayer: boolean;\n  \n  // å­å¼¹ç±»å‹\n  readonly type: 'normal' | 'tracking' | 'spread' | 'laser';\n  \n  // è·Ÿè¸ªç›®æ ‡ï¼ˆç”¨äºè·Ÿè¸ªå¼¹ï¼‰\n  private targetX: number | null = null;\n  \n  // æ„é€ å‡½æ•°\n  constructor(x: number, y: number, speed: number, damage: number, isPlayer: boolean, type: 'normal' | 'tracking' | 'spread' | 'laser' = 'normal') {\n    this.x = x;\n    this.y = y;\n    this.speed = speed;\n    this.damage = damage;\n    this.isPlayer = isPlayer;\n    this.type = type;\n    \n    // æ ¹æ®ç±»å‹è®¾ç½®å°ºå¯¸\n    if (type === 'laser') {\n      this.width = 6;\n      this.height = 40;\n    } else if (type === 'spread') {\n      this.width = 4;\n      this.height = 10;\n    } else {\n      this.width = 4;\n      this.height = 12;\n    }\n  }\n  \n  // è®¾ç½®è·Ÿè¸ªç›®æ ‡\n  setTarget(x: number): void {\n    this.targetX = x;\n  }\n  \n  // æ›´æ–°ä½ç½®\n  update(deltaTime: number): void {\n    const direction = this.isPlayer ? -1 : 1;\n    const timeScale = deltaTime / 16;\n    \n    if (this.type === 'tracking' && this.targetX !== null) {\n      // è·Ÿè¸ªå¼¹ï¼šå‘ç›®æ ‡æ–¹å‘è½»å¾®è½¬å‘\n      const dx = this.targetX - this.x;\n      this.vx = dx * 0.02; // è·Ÿè¸ªå¼ºåº¦\n      this.y += this.speed * direction * timeScale;\n      this.x += this.vx * timeScale;\n    } else if (this.type === 'spread') {\n      // æ•£å¼¹ï¼šæœ‰æ¨ªå‘é€Ÿåº¦\n      this.y += this.speed * direction * timeScale;\n      this.x += this.vx * timeScale;\n    } else if (this.type === 'laser') {\n      // æ¿€å…‰ï¼šå¿«é€Ÿç§»åŠ¨\n      this.y += this.speed * 1.5 * direction * timeScale;\n    } else {\n      // æ™®é€šå­å¼¹\n      this.y += this.speed * direction * timeScale;\n    }\n  }\n  \n  // æ˜¯å¦è¶…å‡ºè¾¹ç•Œ\n  isOutOfBounds(canvasHeight: number): boolean {\n    return this.y < -this.height || this.y > canvasHeight + this.height;\n  }\n  \n  // è·å–ç¢°æ’çŸ©å½¢\n  getRect(): Rect {\n    return {\n      x: this.x - this.width / 2,\n      y: this.y - this.height / 2,\n      width: this.width,\n      height: this.height,\n    };\n  }\n  \n  // æ£€æŸ¥ç¢°æ’\n  checkCollision(target: { getRect: () => Rect }): boolean {\n    return checkCollision(this.getRect(), target.getRect());\n  }\n  \n  // æ¸²æŸ“\n  render(ctx: CanvasRenderingContext2D): void {\n    if (!this.active) return;\n    \n    if (this.type === 'laser') {\n      // æ¿€å…‰æ•ˆæœ\n      const gradient = ctx.createLinearGradient(this.x, this.y - this.height / 2, this.x, this.y + this.height / 2);\n      gradient.addColorStop(0, 'rgba(0, 255, 255, 0.8)');\n      gradient.addColorStop(0.5, 'rgba(0, 255, 255, 1)');\n      gradient.addColorStop(1, 'rgba(0, 255, 255, 0.3)');\n      ctx.fillStyle = gradient;\n      ctx.fillRect(this.x - this.width / 2, this.y - this.height / 2, this.width, this.height);\n      \n      // å‘å…‰æ•ˆæœ\n      ctx.shadowBlur = 10;\n      ctx.shadowColor = '#00ffff';\n      ctx.fillRect(this.x - 2, this.y - this.height / 2, 4, this.height);\n      ctx.shadowBlur = 0;\n    } else if (this.type === 'tracking') {\n      // è·Ÿè¸ªå¼¹ï¼šè“è‰²\n      ctx.fillStyle = '#00ffff';\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.width, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // æ‹–å°¾æ•ˆæœ\n      ctx.fillStyle = 'rgba(0, 255, 255, 0.5)';\n      ctx.fillRect(this.x - 1, this.y + this.height / 2, 2, 8);\n    } else if (this.type === 'spread') {\n      // æ•£å¼¹ï¼šç´«è‰²\n      ctx.fillStyle = '#9b59b6';\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.width + 1, 0, Math.PI * 2);\n      ctx.fill();\n    } else {\n      // æ™®é€šå­å¼¹\n      ctx.fillStyle = this.isPlayer ? '#f1c40f' : '#e74c3c';\n      ctx.fillRect(\n        this.x - this.width / 2,\n        this.y - this.height / 2,\n        this.width,\n        this.height\n      );\n    }\n  }\n}\n\n/**\n * å­å¼¹ç®¡ç†å™¨ç±»\n */\nexport class BulletManager {\n  // å­å¼¹åˆ—è¡¨\n  private bullets: Bullet[] = [];\n  \n  // æ¸¸æˆé…ç½®\n  private config: GameConfig;\n  \n  // æ„é€ å‡½æ•°\n  constructor(config: GameConfig) {\n    this.config = config;\n  }\n  \n  // åˆ›å»ºç©å®¶å­å¼¹\n  createPlayerBullet(x: number, y: number): void {\n    const bullet = new Bullet(\n      x,\n      y,\n      this.config.bulletSpeed,\n      this.config.bulletDamage,\n      true\n    );\n    this.bullets.push(bullet);\n  }\n  \n  // åˆ›å»ºæ•Œäººå­å¼¹\n  createEnemyBullet(x: number, y: number): void {\n    const bullet = new Bullet(\n      x,\n      y,\n      this.config.bulletSpeed * 0.6,\n      1,\n      false\n    );\n    this.bullets.push(bullet);\n    this.bullets.push(bullet);\n  }\n  \n  // åˆ›å»ºè·Ÿè¸ªå¼¹\n  createTrackingBullet(x: number, y: number, targetX: number): void {\n    const bullet = new Bullet(\n      x,\n      y,\n      this.config.bulletSpeed * 0.8,\n      this.config.bulletDamage,\n      true,\n      'tracking'\n    );\n    bullet.setTarget(targetX);\n    this.bullets.push(bullet);\n  }\n  \n  // åˆ›å»ºæ•£å¼¹ï¼ˆ3å‘ï¼‰\n  createSpreadBullet(x: number, y: number): void {\n    const angles = [-0.3, 0, 0.3]; // æ•£å°„è§’åº¦\n    for (const angle of angles) {\n      const bullet = new Bullet(\n        x,\n        y,\n        this.config.bulletSpeed * 0.9,\n        this.config.bulletDamage,\n        true,\n        'spread'\n      );\n      bullet.vx = Math.sin(angle) * bullet.speed;\n      this.bullets.push(bullet);\n    }\n  }\n  \n  // åˆ›å»ºæ¿€å…‰\n  createLaserBullet(x: number, y: number): void {\n    const bullet = new Bullet(\n      x,\n      y,\n      this.config.bulletSpeed * 1.2,\n      this.config.bulletDamage * 2,\n      true,\n      'laser'\n    );\n    this.bullets.push(bullet);\n  }\n  \n  // æ›´æ–°è·Ÿè¸ªå¼¹ç›®æ ‡\n  updateTrackingTargets(enemies: { x: number; active: boolean }[]): void {\n    const playerBullets = this.bullets.filter(b => b.isPlayer && b.type === 'tracking' && b.active);\n    for (const bullet of playerBullets) {\n      let closestEnemy: { x: number } | null = null;\n      let closestDist = Infinity;\n      for (const enemy of enemies) {\n        if (!enemy.active) continue;\n        const dist = Math.abs(enemy.x - bullet.x);\n        if (dist < closestDist) {\n          closestDist = dist;\n          closestEnemy = enemy;\n        }\n      }\n      if (closestEnemy) {\n        bullet.setTarget(closestEnemy.x);\n      }\n    }\n  }\n  \n  // æ›´æ–°\n  update(deltaTime: number): void {\n    for (const bullet of this.bullets) {\n      if (!bullet.active) continue;\n      \n      bullet.update(deltaTime);\n      \n      // ç§»é™¤è¶…å‡ºè¾¹ç•Œçš„å­å¼¹\n      if (bullet.isOutOfBounds(this.config.canvasHeight)) {\n        bullet.active = false;\n      }\n    }\n    \n    // æ¸…ç†éæ´»åŠ¨å­å¼¹\n    this.bullets = this.bullets.filter(b => b.active);\n  }\n  \n  // æ¸²æŸ“\n  render(ctx: CanvasRenderingContext2D): void {\n    for (const bullet of this.bullets) {\n      bullet.render(ctx);\n    }\n  }\n  \n  // è·å–ç©å®¶å­å¼¹\n  getPlayerBullets(): Bullet[] {\n    return this.bullets.filter(b => b.isPlayer);\n  }\n  \n  // è·å–æ•Œäººå­å¼¹\n  getEnemyBullets(): Bullet[] {\n    return this.bullets.filter(b => !b.isPlayer);\n  }\n  \n  // æ¸…é™¤æ‰€æœ‰å­å¼¹\n  clear(): void {\n    this.bullets = [];\n  }\n}\n","/**\n * æ•Œäººå®ä½“\n */\n\nimport type { GameConfig, Rect, EnemyType, LevelConfig } from '../types';\nimport { checkCollision, randomInt } from '../utils';\n\n/**\n * æ•Œäººç±»å‹é…ç½®\n */\nconst ENEMY_CONFIGS: Record<EnemyType, { width: number; height: number; health: number; speed: number; score: number; color: string }> = {\n  normal: { width: 30, height: 30, health: 1, speed: 2, score: 10, color: '#e74c3c' },\n  fast: { width: 25, height: 25, health: 1, speed: 4, score: 20, color: '#9b59b6' },\n  heavy: { width: 45, height: 45, health: 3, speed: 1, score: 30, color: '#8e44ad' },\n  boss: { width: 80, height: 80, health: 20, speed: 1.5, score: 500, color: '#c0392b' },\n  elite: { width: 35, height: 35, health: 3, speed: 5, score: 50, color: '#e67e22' },\n  shielded: { width: 40, height: 40, health: 2, speed: 2, score: 40, color: '#3498db' },\n  bomber: { width: 50, height: 50, health: 2, speed: 1, score: 60, color: '#7f8c8d' },\n};\n\n/**\n * æ•Œäººç±»\n */\nexport class Enemy {\n  // ä½ç½®\n  x: number;\n  y: number;\n\n  // å°ºå¯¸\n  readonly width: number;\n  readonly height: number;\n\n  // å±æ€§\n  health: number;\n  maxHealth: number;\n  speed: number;\n  score: number;\n  type: EnemyType;\n\n  // æ¿€æ´»çŠ¶æ€\n  active = true;\n\n  // å°„å‡»å†·å´\n  private shootCooldown = 0;\n  private shootInterval = 0;\n\n  // æ¸¸æˆé…ç½®\n  private config: GameConfig;\n\n  // æ„é€ å‡½æ•°\n  constructor(x: number, y: number, type: EnemyType, config: GameConfig, levelConfig?: LevelConfig) {\n    const enemyConfig = ENEMY_CONFIGS[type];\n\n    this.x = x;\n    this.y = y;\n    this.type = type;\n    this.width = enemyConfig.width;\n    this.height = enemyConfig.height;\n    this.maxHealth = enemyConfig.health;\n    this.health = enemyConfig.health;\n    this.speed = enemyConfig.speed * (levelConfig?.enemySpeed ?? 1);\n    this.score = enemyConfig.score;\n    this.config = config;\n\n    // Boss å°„å‡»æ›´å¿«\n    this.shootInterval = type === 'boss' ? 1500 : randomInt(2000, 4000);\n  }\n\n  // æ›´æ–°\n  update(deltaTime: number): void {\n    if (!this.active) return;\n\n    // å‘ä¸‹ç§»åŠ¨\n    this.y += this.speed * (deltaTime / 16);\n\n    // å°„å‡»å†·å´\n    if (this.shootCooldown > 0) {\n      this.shootCooldown -= deltaTime;\n    }\n  }\n\n  // æ£€æŸ¥æ˜¯å¦å¯ä»¥å°„å‡»\n  canShoot(): boolean {\n    return this.active && this.shootCooldown <= 0;\n  }\n\n  // å¼€å§‹å°„å‡»å†·å´\n  startShooting(): void {\n    this.shootCooldown = this.shootInterval;\n  }\n\n  // å—ä¼¤\n  takeDamage(damage: number): void {\n    this.health -= damage;\n    if (this.health < 0) {\n      this.health = 0;\n    }\n  }\n\n  // æ˜¯å¦è¢«æ‘§æ¯\n  isDestroyed(): boolean {\n    return this.health <= 0;\n  }\n\n  // æ‘§æ¯\n  destroy(): void {\n    this.active = false;\n  }\n\n  // æ˜¯å¦è¶…å‡ºè¾¹ç•Œ\n  isOutOfBounds(): boolean {\n    return this.y > this.config.canvasHeight + this.height;\n  }\n\n  // è·å–ç¢°æ’çŸ©å½¢\n  getRect(): Rect {\n    return {\n      x: this.x - this.width / 2,\n      y: this.y - this.height / 2,\n      width: this.width,\n      height: this.height,\n    };\n  }\n\n  // æ£€æŸ¥ç¢°æ’\n  checkCollision(target: { getRect: () => Rect }): boolean {\n    return checkCollision(this.getRect(), target.getRect());\n  }\n\n  // æ¸²æŸ“\n  render(ctx: CanvasRenderingContext2D): void {\n    if (!this.active) return;\n\n    const enemyConfig = ENEMY_CONFIGS[this.type];\n\n    // ç»˜åˆ¶æ•Œäººä¸»ä½“\n    ctx.fillStyle = enemyConfig.color;\n\n    // æ ¹æ®ç±»å‹ç»˜åˆ¶ä¸åŒå½¢çŠ¶\n    switch (this.type) {\n      case 'normal':\n        this.drawNormalEnemy(ctx);\n        break;\n      case 'fast':\n        this.drawFastEnemy(ctx);\n        break;\n      case 'heavy':\n        this.drawHeavyEnemy(ctx);\n        break;\n      case 'boss':\n        this.drawBossEnemy(ctx);\n        break;\n      case 'elite':\n        this.drawEliteEnemy(ctx);\n        break;\n      case 'shielded':\n        this.drawShieldedEnemy(ctx);\n        break;\n      case 'bomber':\n        this.drawBomberEnemy(ctx);\n        break;\n    }\n\n    // ç»˜åˆ¶è¡€æ¡\n    this.drawHealthBar(ctx);\n  }\n\n  // ç»˜åˆ¶æ™®é€šæ•Œäºº\n  private drawNormalEnemy(ctx: CanvasRenderingContext2D): void {\n    // å€’ä¸‰è§’å½¢\n    ctx.beginPath();\n    ctx.moveTo(this.x - this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x + this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x, this.y + this.height / 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  // ç»˜åˆ¶å¿«é€Ÿæ•Œäºº\n  private drawFastEnemy(ctx: CanvasRenderingContext2D): void {\n    // è±å½¢\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y - this.height / 2);\n    ctx.lineTo(this.x + this.width / 2, this.y);\n    ctx.lineTo(this.x, this.y + this.height / 2);\n    ctx.lineTo(this.x - this.width / 2, this.y);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  // ç»˜åˆ¶é‡å‹æ•Œäºº\n  private drawHeavyEnemy(ctx: CanvasRenderingContext2D): void {\n    // å…­è¾¹å½¢\n    ctx.beginPath();\n    for (let i = 0; i < 6; i++) {\n      const angle = (Math.PI / 3) * i - Math.PI / 2;\n      const x = this.x + (this.width / 2) * Math.cos(angle);\n      const y = this.y + (this.height / 2) * Math.sin(angle);\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  // ç»˜åˆ¶Boss\n  private drawBossEnemy(ctx: CanvasRenderingContext2D): void {\n    // å¤§å€’ä¸‰è§’å½¢\n    ctx.beginPath();\n    ctx.moveTo(this.x - this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x + this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x, this.y + this.height / 2);\n    ctx.closePath();\n    ctx.fill();\n\n    // çœ¼ç›\n    ctx.fillStyle = '#ffffff';\n    ctx.beginPath();\n    ctx.arc(this.x - 15, this.y, 8, 0, Math.PI * 2);\n    ctx.arc(this.x + 15, this.y, 8, 0, Math.PI * 2);\n    ctx.fill();\n\n    // ç³å­”\n    ctx.fillStyle = '#000000';\n    ctx.beginPath();\n    ctx.arc(this.x - 15, this.y, 4, 0, Math.PI * 2);\n    ctx.arc(this.x + 15, this.y, 4, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  // ç»˜åˆ¶ç²¾è‹±æ•Œäºº\n  private drawEliteEnemy(ctx: CanvasRenderingContext2D): void {\n    // æ›´å¤§çš„å€’ä¸‰è§’å½¢ï¼Œå¸¦æœ‰çº¢è‰²å…‰ç¯\n    ctx.beginPath();\n    ctx.moveTo(this.x - this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x + this.width / 2, this.y - this.height / 2);\n    ctx.lineTo(this.x, this.y + this.height / 2);\n    ctx.closePath();\n    ctx.fill();\n\n    // çº¢è‰²å…‰ç¯\n    ctx.strokeStyle = '#e74c3c';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.width / 2 + 5, 0, Math.PI * 2);\n    ctx.stroke();\n    ctx.lineWidth = 1;\n  }\n\n  // ç»˜åˆ¶æŠ¤ç›¾æ•Œäºº\n  private drawShieldedEnemy(ctx: CanvasRenderingContext2D): void {\n    // è“è‰²åœ†å½¢ä¸»ä½“\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.width / 2, 0, Math.PI * 2);\n    ctx.fill();\n\n    // è“è‰²æŠ¤ç›¾åœ†åœˆ\n    ctx.strokeStyle = '#3498db';\n    ctx.lineWidth = 5;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.width / 2 + 8, 0, Math.PI * 2);\n    ctx.stroke();\n    ctx.lineWidth = 1;\n\n    // æŠ¤ç›¾è£‚çº¹\n    ctx.strokeStyle = '#2980b9';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(this.x - 10, this.y - 15);\n    ctx.lineTo(this.x + 5, this.y);\n    ctx.lineTo(this.x - 5, this.y + 15);\n    ctx.stroke();\n  }\n\n  // ç»˜åˆ¶è½°ç‚¸æœºæ•Œäºº\n  private drawBomberEnemy(ctx: CanvasRenderingContext2D): void {\n    // ç°è‰²æ–¹å½¢ä¸»ä½“\n    ctx.fillStyle = '#7f8c8d';\n    ctx.fillRect(this.x - this.width / 2, this.y - this.height / 2, this.width, this.height);\n\n    // ç‚¸å¼¹æ ‡è®°\n    ctx.fillStyle = '#e74c3c';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.fillText('ğŸ’£', this.x, this.y);\n\n    // å¼•ä¿¡\n    ctx.strokeStyle = '#e74c3c';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y - this.height / 2);\n    ctx.lineTo(this.x, this.y - this.height / 2 - 10);\n    ctx.stroke();\n  }\n\n  // ç»˜åˆ¶è¡€æ¡\n  private drawHealthBar(ctx: CanvasRenderingContext2D): void {\n    if (this.maxHealth <= 1) return;\n\n    const barWidth = this.width;\n    const barHeight = 4;\n    const startX = this.x - barWidth / 2;\n    const startY = this.y - this.height / 2 - 10;\n\n    // èƒŒæ™¯bar\n    ctx.fillStyle = '#555555';\n    ctx.fillRect(startX, startY, barWidth, barHeight);\n\n    // è¡€é‡\n    const healthPercent = this.health / this.maxHealth;\n    ctx.fillStyle = healthPercent > 0.3 ? '#2ecc71' : '#e74c3c';\n    ctx.fillRect(startX, startY, barWidth * healthPercent, barHeight);\n  }\n}\n","/**\n * æ•Œäººç®¡ç†å™¨\n */\n\nimport type { GameConfig, LevelConfig, EnemyType } from '../types';\nimport { randomInt } from '../utils';\nimport { Enemy } from './enemy';\n\n/**\n * æ•Œäººç®¡ç†å™¨ç±»\n */\nexport class EnemyManager {\n  // æ•Œäººåˆ—è¡¨\n  private enemies: Enemy[] = [];\n\n  // æ¸¸æˆé…ç½®\n  private config: GameConfig;\n\n  // å…³å¡é…ç½®\n  private levelConfig: LevelConfig;\n\n  // æ„é€ å‡½æ•°\n  constructor(config: GameConfig) {\n    this.config = config;\n    this.levelConfig = {\n      level: 1,\n      name: 'ç¬¬ä¸€å…³',\n      enemyCount: 20,\n      spawnInterval: 1500,\n      enemySpeed: 2,\n      bossLevel: false,\n    };\n  }\n\n  // è®¾ç½®å…³å¡é…ç½®\n  setLevelConfig(levelConfig: LevelConfig): void {\n    this.levelConfig = levelConfig;\n  }\n\n  // ç”Ÿæˆæ•Œäºº\n  spawn(canvasWidth: number): void {\n    // æ ¹æ®å…³å¡ç”Ÿæˆä¸åŒç±»å‹çš„æ•Œäºº\n    const enemyType = this.getRandomEnemyType();\n    const x = randomInt(50, canvasWidth - 50);\n    const y = -50;\n\n    const enemy = new Enemy(x, y, enemyType, this.config, this.levelConfig);\n    this.enemies.push(enemy);\n  }\n\n  // éšæœºè·å–æ•Œäººç±»å‹\n  private getRandomEnemyType(): EnemyType {\n    const rand = Math.random();\n    const level = this.levelConfig.level;\n\n    // æ ¹æ®å…³å¡è°ƒæ•´æ•Œäººç±»å‹æ¦‚ç‡\n    if (this.levelConfig.bossLevel && this.enemies.length === 0) {\n      // æœ€åä¸€å…³ç¬¬ä¸€ä¸ªæ•Œäººæ˜¯Boss\n      return 'boss';\n    }\n\n    if (level === 1) {\n      // ç¬¬ä¸€å…³ï¼šä¸»è¦æ˜¯æ™®é€šæ•Œäºº\n      if (rand < 0.8) return 'normal';\n      return 'fast';\n    } else if (level === 2) {\n      // ç¬¬äºŒå…³ï¼šæ™®é€šå’Œå¿«é€Ÿæ•Œäºº\n      if (rand < 0.5) return 'normal';\n      if (rand < 0.8) return 'fast';\n      return 'heavy';\n    } else {\n      // ç¬¬ä¸‰å…³ï¼šæ··åˆæ•Œäºº\n      if (rand < 0.4) return 'normal';\n      if (rand < 0.7) return 'fast';\n      if (rand < 0.85) return 'elite';\n      if (rand < 0.93) return 'shielded';\n      return 'bomber';\n    }\n  }\n\n  // æ›´æ–°\n  update(deltaTime: number): void {\n    for (const enemy of this.enemies) {\n      if (!enemy.active) continue;\n\n      enemy.update(deltaTime);\n\n      // ç§»é™¤è¶…å‡ºè¾¹ç•Œçš„æ•Œäºº\n      if (enemy.isOutOfBounds()) {\n        enemy.destroy();\n      }\n    }\n\n    // æ¸…ç†éæ´»åŠ¨æ•Œäºº\n    this.enemies = this.enemies.filter(e => e.active);\n  }\n\n  // æ¸²æŸ“\n  render(ctx: CanvasRenderingContext2D): void {\n    for (const enemy of this.enemies) {\n      enemy.render(ctx);\n    }\n  }\n\n  // è·å–æ•Œäººåˆ—è¡¨\n  getEnemies(): Enemy[] {\n    return this.enemies;\n  }\n\n  // æ¸…é™¤æ‰€æœ‰æ•Œäºº\n  clear(): void {\n    this.enemies = [];\n  }\n}\n","/**\n * æ¸¸æˆå¼•æ“æ ¸å¿ƒ\n */\n\nimport type { GameState, GameConfig, LevelConfig, KeyState } from '../types';\nimport { DEFAULT_GAME_CONFIG, LEVEL_CONFIGS } from '../types';\nimport { clamp } from '../utils';\nimport { Player } from '../entities/player';\nimport { BulletManager } from '../entities/bullet-manager';\nimport { EnemyManager } from '../entities/enemy-manager';\nimport { soundManager } from '../systems/sound-manager';\n\n/**\n * æ¸¸æˆå¼•æ“ - æ ¸å¿ƒæ§åˆ¶å™¨\n */\nexport class GameEngine {\n  private ctx: CanvasRenderingContext2D;\n  private config: GameConfig;\n  private state: GameState = 'menu';\n  private score = 0;\n  private currentLevel = 1;\n  private levelConfig: LevelConfig;\n  private player: Player;\n  private bulletManager: BulletManager;\n  private enemyManager: EnemyManager;\n  private keys: KeyState = {\n    ArrowUp: false,\n    ArrowDown: false,\n    ArrowLeft: false,\n    ArrowRight: false,\n    Space: false,\n  };\n  private animationId: number | null = null;\n  private lastTime = 0;\n  private accumulator = 0;\n  private readonly fixedDeltaTime = 1000 / 60;\n  private spawnTimer = 0;\n  private enemiesSpawned = 0;\n\n  constructor(canvas: HTMLCanvasElement, config: Partial<GameConfig> = {}) {\n    this.ctx = canvas.getContext('2d')!;\n    this.config = { ...DEFAULT_GAME_CONFIG, ...config };\n    this.levelConfig = LEVEL_CONFIGS[0];\n    \n    this.player = new Player(\n      this.config.canvasWidth / 2,\n      this.config.canvasHeight - 80,\n      this.config\n    );\n    this.bulletManager = new BulletManager(this.config);\n    this.enemyManager = new EnemyManager(this.config);\n    \n    this.bindEvents();\n  }\n  \n  private bindEvents(): void {\n    window.addEventListener('keydown', (e) => this.handleKeyDown(e));\n    window.addEventListener('keyup', (e) => this.handleKeyUp(e));\n  }\n  \n  private handleKeyDown(e: KeyboardEvent): void {\n    if (e.code === 'ArrowUp') this.keys.ArrowUp = true;\n    if (e.code === 'ArrowDown') this.keys.ArrowDown = true;\n    if (e.code === 'ArrowLeft') this.keys.ArrowLeft = true;\n    if (e.code === 'ArrowRight') this.keys.ArrowRight = true;\n    if (e.code === 'Space') this.keys.Space = true;\n    \n    if (this.state === 'menu' && e.code === 'Space') {\n      this.startGame();\n    }\n    if (this.state === 'gameOver' && e.code === 'Space') {\n      this.restartGame();\n    }\n    if (this.state === 'levelComplete' && e.code === 'Space') {\n      this.nextLevel();\n    }\n    \n    if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Space'].includes(e.code)) {\n      e.preventDefault();\n    }\n  }\n  \n  private handleKeyUp(e: KeyboardEvent): void {\n    if (e.code === 'ArrowUp') this.keys.ArrowUp = false;\n    if (e.code === 'ArrowDown') this.keys.ArrowDown = false;\n    if (e.code === 'ArrowLeft') this.keys.ArrowLeft = false;\n    if (e.code === 'ArrowRight') this.keys.ArrowRight = false;\n    if (e.code === 'Space') this.keys.Space = false;\n  }\n  \n  startGame(): void {\n    this.state = 'playing';\n    this.score = 0;\n    this.currentLevel = 1;\n    this.loadLevel(1);\n    this.startLoop();\n  }\n  \n  restartGame(): void {\n    this.player.reset(\n      this.config.canvasWidth / 2,\n      this.config.canvasHeight - 80\n    );\n    this.bulletManager.clear();\n    this.enemyManager.clear();\n    this.startGame();\n  }\n  \n  nextLevel(): void {\n    if (this.currentLevel < LEVEL_CONFIGS.length) {\n      this.currentLevel++;\n      this.loadLevel(this.currentLevel);\n      this.state = 'playing';\n    } else {\n      this.state = 'gameOver';\n    }\n  }\n  \n  private loadLevel(level: number): void {\n    this.levelConfig = LEVEL_CONFIGS[level - 1];\n    this.spawnTimer = 0;\n    this.enemiesSpawned = 0;\n    this.enemyManager.setLevelConfig(this.levelConfig);\n    this.player.reset(\n      this.config.canvasWidth / 2,\n      this.config.canvasHeight - 80\n    );\n  }\n  \n  private startLoop(): void {\n    if (this.animationId !== null) {\n      cancelAnimationFrame(this.animationId);\n    }\n    this.lastTime = performance.now();\n    this.loop(this.lastTime);\n  }\n  \n  private loop(currentTime: number): void {\n    const deltaTime = currentTime - this.lastTime;\n    this.lastTime = currentTime;\n    this.accumulator += deltaTime;\n    \n    while (this.accumulator >= this.fixedDeltaTime) {\n      this.update(this.fixedDeltaTime);\n      this.accumulator -= this.fixedDeltaTime;\n    }\n    \n    this.render();\n    \n    this.animationId = requestAnimationFrame((time) => this.loop(time));\n  }\n  \n  private update(deltaTime: number): void {\n    if (this.state !== 'playing') return;\n    \n    this.updatePlayer(deltaTime);\n    this.player.update(deltaTime);\n    this.bulletManager.update(deltaTime);\n    this.enemyManager.update(deltaTime);\n    this.updateSpawning(deltaTime);\n    this.updateEnemyShooting();\n    this.checkCollisions();\n    this.checkGameState();\n  }\n  \n  private updatePlayer(_deltaTime: number): void {\n    let dx = 0;\n    let dy = 0;\n    const speed = this.config.playerSpeed;\n    \n    if (this.keys.ArrowUp) dy -= speed;\n    if (this.keys.ArrowDown) dy += speed;\n    if (this.keys.ArrowLeft) dx -= speed;\n    if (this.keys.ArrowRight) dx += speed;\n    \n    const newX = this.player.x + dx;\n    const newY = this.player.y + dy;\n    \n    this.player.x = clamp(newX, this.player.width / 2, this.config.canvasWidth - this.player.width / 2);\n    this.player.y = clamp(newY, this.player.height / 2, this.config.canvasHeight - this.player.height / 2);\n    \n    this.player.shoot(this.bulletManager);\n  }\n  \n  private updateSpawning(deltaTime: number): void {\n    if (this.enemiesSpawned >= this.levelConfig.enemyCount) return;\n    \n    this.spawnTimer += deltaTime;\n    \n    if (this.spawnTimer >= this.levelConfig.spawnInterval) {\n      this.spawnTimer = 0;\n      this.enemyManager.spawn(this.config.canvasWidth);\n      this.enemiesSpawned++;\n    }\n  }\n  \n  private updateEnemyShooting(): void {\n    const enemies = this.enemyManager.getEnemies();\n    \n    for (const enemy of enemies) {\n      if (!enemy.active) continue;\n      \n      if (enemy.canShoot()) {\n        this.bulletManager.createEnemyBullet(enemy.x, enemy.y + enemy.height / 2);\n        enemy.startShooting();\n        soundManager.play('enemyShoot');\n      }\n    }\n  }\n  \n  private checkCollisions(): void {\n    const playerBullets = this.bulletManager.getPlayerBullets();\n    const enemies = this.enemyManager.getEnemies();\n    \n    for (const bullet of playerBullets) {\n      for (const enemy of enemies) {\n        if (bullet.active && enemy.active && bullet.checkCollision(enemy)) {\n          bullet.active = false;\n          enemy.takeDamage(bullet.damage);\n          \n          if (enemy.isDestroyed()) {\n            enemy.destroy();\n            this.score += enemy.score;\n          }\n        }\n      }\n    }\n    \n    const enemyBullets = this.bulletManager.getEnemyBullets();\n    for (const bullet of enemyBullets) {\n      if (bullet.active && bullet.checkCollision(this.player)) {\n        bullet.active = false;\n        this.player.takeDamage(bullet.damage);\n      }\n    }\n    \n    for (const enemy of enemies) {\n      if (enemy.active && enemy.checkCollision(this.player)) {\n        enemy.destroy();\n        this.player.takeDamage(1);\n      }\n    }\n  }\n  \n  private checkGameState(): void {\n    if (this.player.isDestroyed()) {\n      this.state = 'gameOver';\n    }\n    \n    if (this.enemiesSpawned >= this.levelConfig.enemyCount && \n        this.enemyManager.getEnemies().length === 0) {\n      this.state = 'levelComplete';\n    }\n  }\n  \n  render(): void {\n    this.ctx.fillStyle = '#1a1a2e';\n    this.ctx.fillRect(0, 0, this.config.canvasWidth, this.config.canvasHeight);\n    \n    switch (this.state) {\n      case 'menu':\n        this.renderMenu();\n        break;\n      case 'playing':\n        this.renderGame();\n        this.renderUI();\n        break;\n      case 'levelComplete':\n        this.renderGame();\n        this.renderUI();\n        this.renderLevelComplete();\n        break;\n      case 'gameOver':\n        this.renderGame();\n        this.renderUI();\n        this.renderGameOver();\n        break;\n    }\n  }\n  \n  private renderGame(): void {\n    this.enemyManager.render(this.ctx);\n    this.bulletManager.render(this.ctx);\n    this.player.render(this.ctx);\n  }\n  \n  private renderUI(): void {\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.font = '16px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText(`åˆ†æ•°: ${this.score}`, 10, 25);\n    this.ctx.fillText(`ç”Ÿå‘½: ${this.player.health}`, 10, 50);\n    this.ctx.fillText(`å…³å¡: ${this.currentLevel}/3`, 10, 75);\n  }\n  \n  private renderMenu(): void {\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.font = '36px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText('é£æœºå¤§æˆ˜', this.config.canvasWidth / 2, this.config.canvasHeight / 2 - 50);\n    this.ctx.font = '20px Arial';\n    this.ctx.fillText('æŒ‰ç©ºæ ¼é”®å¼€å§‹', this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 20);\n    this.ctx.font = '14px Arial';\n    this.ctx.fillStyle = '#888888';\n    this.ctx.fillText('æ–¹å‘é”®ç§»åŠ¨ï¼Œç©ºæ ¼é”®å°„å‡»', this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 60);\n  }\n  \n  private renderLevelComplete(): void {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.ctx.fillRect(0, 0, this.config.canvasWidth, this.config.canvasHeight);\n    this.ctx.fillStyle = '#00ff00';\n    this.ctx.font = '36px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText('å…³å¡å®Œæˆ!', this.config.canvasWidth / 2, this.config.canvasHeight / 2 - 30);\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.font = '20px Arial';\n    this.ctx.fillText(`å¾—åˆ†: ${this.score}`, this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 20);\n    this.ctx.font = '16px Arial';\n    this.ctx.fillText('æŒ‰ç©ºæ ¼é”®è¿›å…¥ä¸‹ä¸€å…³', this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 60);\n  }\n  \n  private renderGameOver(): void {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.ctx.fillRect(0, 0, this.config.canvasWidth, this.config.canvasHeight);\n    this.ctx.fillStyle = '#ff0000';\n    this.ctx.font = '36px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText('æ¸¸æˆç»“æŸ', this.config.canvasWidth / 2, this.config.canvasHeight / 2 - 30);\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.font = '20px Arial';\n    this.ctx.fillText(`æœ€ç»ˆå¾—åˆ†: ${this.score}`, this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 20);\n    if (this.currentLevel >= 3) {\n      this.ctx.fillStyle = '#ffd700';\n      this.ctx.fillText('æ­å–œé€šå…³!', this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 50);\n    }\n    this.ctx.font = '16px Arial';\n    this.ctx.fillStyle = '#888888';\n    this.ctx.fillText('æŒ‰ç©ºæ ¼é”®é‡æ–°å¼€å§‹', this.config.canvasWidth / 2, this.config.canvasHeight / 2 + 90);\n  }\n  \n  destroy(): void {\n    if (this.animationId !== null) {\n      cancelAnimationFrame(this.animationId);\n    }\n  }\n}\n","/**\n * æ¸¸æˆå…¥å£æ–‡ä»¶\n */\n\nimport { GameEngine } from './engine/game-engine';\n\n// è·å– Canvas å…ƒç´ \nconst canvas = document.getElementById('game-canvas') as HTMLCanvasElement;\n\nif (!canvas) {\n  throw new Error('æ‰¾ä¸åˆ°æ¸¸æˆ Canvas å…ƒç´ ');\n}\n\n// åˆ›å»ºæ¸¸æˆå¼•æ“\nconst game = new GameEngine(canvas);\n\n// å¯¼å‡ºæ¸¸æˆå®ä¾‹ä¾›è°ƒè¯•ä½¿ç”¨\nexport { game };\n\n// é¡µé¢å¸è½½æ—¶æ¸…ç†\nwindow.addEventListener('beforeunload', () => {\n  game.destroy();\n});\n"],"names":["DEFAULT_GAME_CONFIG","LEVEL_CONFIGS","checkCollision","rect1","rect2","clamp","value","min","max","randomInt","SoundManager","__publicField","_a","enabled","volume","type","osc","gain","bufferSize","buffer","data","i","noise","filter","osc1","osc2","notes","duration","freq","startTime","soundManager","Player","x","y","config","bulletManager","deltaTime","damage","other","ctx","startX","startY","healthPercent","Bullet","speed","isPlayer","direction","timeScale","dx","canvasHeight","target","gradient","BulletManager","bullet","targetX","angles","angle","enemies","playerBullets","b","closestEnemy","closestDist","enemy","dist","ENEMY_CONFIGS","Enemy","levelConfig","enemyConfig","barWidth","barHeight","EnemyManager","canvasWidth","enemyType","rand","level","GameEngine","canvas","e","currentTime","time","_deltaTime","dy","newX","newY","enemyBullets","game"],"mappings":"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"}